<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reader</title>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="/static/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified JavaScript -->
    <script src="/static/js/jquery351.js" ></script>
    <script src="/static/js/materialize.min.js"></script>
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/static/css/owl.theme.default.min.css">


</head>

<body>

  
  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Atack of titans</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="javascript:CheckChapter('118')">118</a></li>
      </ul>

      <ul id="nav-mobile" class="sidenav">
        <li><a href="javascript:CheckChapter('118')">118</a></li>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>



    <div class="">
      <div class="row">
        <div id="js-carousel-1" class="owl-carousel">

        

        </div>

      </div>

      <div class="row center">
        <div class="col s6 m6 l6" ><a style="width: 100%;" class="btn-large" id="prev" ><</a></div>
        <div class="col s6 m6 l6" ><a style="width: 100%;" class="btn-large" id="next" >></a></div>
      </div>


    </div>


  <!--  Scripts-->
  
  <script src="/static/js/materialize.js"></script>
  <script src="/static/js/init.js"></script>
  <script src="/static/js/owl.carousel.min.js"></script>
  <script>


  $(document).ready(()=>{
    function checkExists(imageUrl, callback) {
      var img = new Image();
  
      img.onerror = function() {
          callback(false);
      };
  
      img.onload = function() {
          callback(true);
      };
  
      img.src = imageUrl;
  }

    function CheckChapter(chapter){
      $('#js-carousel-1').html('')
        for(var i=1; i<45; i++){
          //['jpg','png'].forEach((format)=>{
            format = 'jpg'
            link = `/static/img/${chapter}/${i<10?'0'+ String(i):i}_fan-naruto.ru.${format}`
            template = `<div><img class="img" style="width:${window.innerWidth}px" src="${link}" alt="${link}"></div>`
            $('#js-carousel-1').append(template)
            //checkExists(link,(exists)=>{
            //  if(exists) {
            //    $('#js-carousel-1').append(template)
            //  }
            //})
          //})
        }
    }
    
    CheckChapter('118')

    var owl = $('.owl-carousel')

    owl.owlCarousel({
        items: 1,
        mouseDrag:false,
        pullDrag:false,
        touchDrag:false
    })

    $('#prev').click(()=>{
      owl.trigger('prev.owl.carousel');
    })

    $('#next').click(()=> {
      owl.trigger('next.owl.carousel')
    })

    $('.img').css({'width':`${window.innerWidth}px`})




  })


  </script>

</body>

</html>